@model MicroWaveFood.ViewModels.HomeIndexViewModel
@{
    ViewBag.Title = "Home Page";
}

@*<div class="col">
        <a href="#" style="display:inline-block">@item.Name</a>
        <ul style="margin-left:30px">
            <li>
                <a href="@Html">a</a>
            </li>
            <li>b</li>
            <li>c</li>
            <li>d</li>
            <li>e</li>
        </ul>
    </div>*@
<nav class="navbar-first container container-fluid nav" style="justify-content: space-evenly!important">
    @foreach (var i in Model.GroupTypes)
    {
        if (i.ToString() == "Đồ làm bánh")
        {
            <div class="dropdown-first">
                <button class="dropbtn">
                    @i.ToString()
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content" style="z-index:10;background-color:ghostwhite; vertical-align:bottom;">

                    <div class="row" style="min-width:1000px">
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Nguyên liệu làm bánh"})">Nguyên liệu làm bánh</a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Nguyên liệu làm bánh")
                                    {
                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Làm bánh"})">Làm bánh</a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Dụng cụ làm bánh")
                                    {

                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>

                                    }
                                }
                            </ul>
                        </div>
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Khuôn khay"})">Khuôn khay</a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Khuôn khay làm bánh")
                                    {

                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>

                                    }
                                }
                            </ul>
                        </div>
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Túi, hộp, cốc, lọ"})">Túi, hộp, cốc, lọ</a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Túi,hộp,cốc,lọ")
                                    {

                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        }
        else if (i.ToString() == "Đồ nấu ăn")
        {
            <div class="dropdown-first">
                <button class="dropbtn">
                    @i.ToString()
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content" style="z-index: 10; background-color: ghostwhite; vertical-align: bottom; margin-left: -315px;">

                    <div class="row" style="min-width:1000px">
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Món Á"})">Món Á</a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Món Á")
                                    {

                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>

                                    }
                                }
                            </ul>
                        </div>
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Món Âu"})">Món Âu</a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Món Âu")
                                    {

                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>

                                    }
                                }
                            </ul>
                        </div>
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Dụng cụ nấu ăn"})">Dụng cụ nấu ăn</a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Dụng cụ nấu ăn")
                                    {

                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>

                                    }
                                }
                            </ul>
                        </div>
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Nguyên liệu lẩu nướng"})">Nguyên liệu lẩu nướng</a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Nguyên liệu lẩu nướng")
                                    {

                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        }
        else if (i.ToString() == "Đồ pha chế")
        {
            <div class="dropdown-first">
                <button class="dropbtn">
                    @i.ToString()
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content" style="z-index: 10; background-color: ghostwhite; vertical-align: bottom; min-width:500px; margin-left:-150px; ">

                    <div class="row">
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Nguyên liệu pha chế"})">Nguyên liệu pha chế</a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Nguyên liệu pha chế")
                                    {

                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                        <div class="col">
                            <a class="nav-link ml-3 mt-3" href="@Url.Action("ListProduct", "Products", new { @str = "Dụng cụ pha chế"})">Dụng cụ pha chế </a>
                            <hr />
                            <ul class="ml-3" style="list-style-type:none;">
                                @foreach (var item in Model.ProductTypes)
                                {
                                    if (item.GroupType == "Dụng cụ pha chế ")
                                    {

                                        <li class="my-2">
                                            <a href="@Url.Action("ProductsInProductType", "Products", new { @id = item.ProductTypeId})">@item.Name</a>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        }

    }


</nav>

<div class="row">
    <div class="col-12 text-center">
        <h4 class="hp-category-title title">Bán chạy nhất</h4>
    </div>
</div>
@*another one is ganna slider and this is carousel*@

@if (Model.BestSellerList.Count > 0)
{
    <div id="demo" class="carousel slide mb-3" data-ride="carousel">

        <!-- Indicators -->
        <ul class="carousel-indicators m-0 " style="justify-content:center;">
            <li style="background-color:red" data-target="#demo" data-slide-to="0" class="active"></li>
            <li style="background-color:red" data-target="#demo" data-slide-to="1"></li>
            <li style="background-color:red" data-target="#demo" data-slide-to="2"></li>
        </ul>

        <!-- The slideshow -->
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="row">
                    @for (int i = 0; i < 3; i++)
                    {
                        if (i >= Model.BestSellerList.Count)
                        {
                            break;
                        }
                        <div class="col pt-5">
                            <div class="productImg" style="position:relative">
                                @if (Model.BestSellerList[i].SaleId != null && Model.BestSellerList[i].Sale.From <= DateTime.Now && Model.BestSellerList[i].Sale.To >= DateTime.Now)
                                {

                                    <div class="sale">

                                        <img src="~/Images/discount.png" />
                                    </div>
                                    <div class="discount">
                                        <p style="text-align:right">- @Model.BestSellerList[i].Sale.SaleRate%</p>
                                    </div>
                                }
                                <img class="img-index" src="@Model.BestSellerList[i].Image" />
                            </div>
                            <div class="product-content-container">
                                <div class="productContent">
                                    <div>
                                        <div class="product-content-container">
                                            <div class="container text-center mt-1">
                                                <a data-product-id="@Model.BestSellerList[i].ProductId" class="btn btn-primary button-index">Thêm vào giỏ hàng</a>
                                            </div>
                                            <div class="productContent">
                                                <div class="product-name">
                                                    <p style="text-align:center">@Model.BestSellerList[i].ProductName</p>
                                                </div>
                                                <div class="product-price">
                                                    @if (Model.BestSellerList[i].SaleId != null && Model.BestSellerList[i].Sale.From <= DateTime.Now && Model.BestSellerList[i].Sale.To >= DateTime.Now)
                                                    {
                                                        <p style="text-align:center;"><del>@Model.BestSellerList[i].Price</del> <span style="color:red;">@(Model.BestSellerList[i].Price - (Model.BestSellerList[i].Price * Model.BestSellerList[i].Sale.SaleRate / 100)) đ</span></p>
                                                    }
                                                    else
                                                    {
                                                        <p style="text-align:center">@Model.BestSellerList[i].Price</p>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
            <div class="carousel-item">
                <div class="row">
                    @for (int i = 3; i < 6; i++)
                    {
                        if (i >= Model.BestSellerList.Count)
                        {
                            break;
                        }
                        <div class="col pt-5">
                            <div class="productImg" style="position:relative">
                                @if (Model.BestSellerList[i].SaleId != null && Model.BestSellerList[i].Sale.From <= DateTime.Now && Model.BestSellerList[i].Sale.To >= DateTime.Now)
                                {

                                    <div class="sale">

                                        <img src="~/Images/discount.png" />
                                    </div>
                                    <div class="discount">
                                        <p style="text-align:right">- @Model.BestSellerList[i].Sale.SaleRate%</p>
                                    </div>
                                }
                                <img class="img-index" src="@Model.BestSellerList[i].Image" />
                            </div>
                            <div class="product-content-container">
                                <div class="productContent">
                                    <div>
                                        <div class="product-content-container">
                                            <div class="container text-center mt-1">
                                                <a data-product-id="@Model.BestSellerList[i].ProductId" class="btn btn-primary button-index">Thêm vào giỏ hàng</a>
                                            </div>
                                            <div class="productContent">
                                                <div class="product-name">
                                                    <p style="text-align:center">@Model.BestSellerList[i].ProductName</p>
                                                </div>
                                                <div class="product-price">
                                                    @if (Model.BestSellerList[i].SaleId != null && Model.BestSellerList[i].Sale.From <= DateTime.Now && Model.BestSellerList[i].Sale.To >= DateTime.Now)
                                                    {
                                                        <p style="text-align:center;"><del>@Model.BestSellerList[i].Price</del> <span style="color:red;">@(Model.BestSellerList[i].Price - (Model.BestSellerList[i].Price * Model.BestSellerList[i].Sale.SaleRate / 100)) đ</span></p>
                                                    }
                                                    else
                                                    {
                                                        <p style="text-align:center">@Model.BestSellerList[i].Price</p>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
            <div class="carousel-item">
                <div class="row">
                    @for (int i = 6; i < 9; i++)
                    {
                        if (i >= Model.BestSellerList.Count)
                        {
                            break;
                        }
                        <div class="col pt-5">
                            <div class="productImg" style="position:relative">
                                @if (Model.BestSellerList[i].SaleId != null && Model.BestSellerList[i].Sale.From <= DateTime.Now && Model.BestSellerList[i].Sale.To >= DateTime.Now)
                                {

                                    <div class="sale">

                                        <img src="~/Images/discount.png" />
                                    </div>
                                    <div class="discount">
                                        <p style="text-align:right">- @Model.BestSellerList[i].Sale.SaleRate%</p>
                                    </div>
                                }
                                <img class="img-index" src="@Model.BestSellerList[i].Image" />
                            </div>
                            <div class="product-content-container">
                                <div class="productContent">
                                    <div>
                                        <div class="product-content-container">
                                            <div class="container text-center mt-1">
                                                <a data-product-id="@Model.BestSellerList[i].ProductId" class="btn btn-primary button-index">Thêm vào giỏ hàng</a>
                                            </div>
                                            <div class="productContent">
                                                <div class="product-name">
                                                    <p style="text-align:center">@Model.BestSellerList[i].ProductName</p>
                                                </div>
                                                <div class="product-price">
                                                    @if (Model.BestSellerList[i].SaleId != null && Model.BestSellerList[i].Sale.From <= DateTime.Now && Model.BestSellerList[i].Sale.To >= DateTime.Now)
                                                    {
                                                        <p style="text-align:center;"><del>@Model.BestSellerList[i].Price</del> <span style="color:red;">@(Model.BestSellerList[i].Price - (Model.BestSellerList[i].Price * Model.BestSellerList[i].Sale.SaleRate / 100)) đ</span></p>
                                                    }
                                                    else
                                                    {
                                                        <p style="text-align:center">@Model.BestSellerList[i].Price</p>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>

        <!-- Left and right controls -->
        <a class="carousel-control-prev" href="#demo" data-slide="prev">
            <span class="carousel-control-prev-icon bg-dark" style="border-radius: 10px"></span>
        </a>
        <a class="carousel-control-next" href="#demo" data-slide="next">
            <span class="carousel-control-next-icon bg-dark" style="border-radius: 10px"></span>
        </a>
    </div>
}
else
{
    <p>Tạm thời chưa món hàng nào bán chạy!</p>
}

<h4 class="title">
    Các Mặt hàng
</h4>
<div class="container">
    <div class="row">
        @foreach (var item in Model.ListRandom)
        {
            <div class="col pt-5">
                <div class="productImg" style="position:relative">
                    @if (item.SaleId != null && item.Sale.From <= DateTime.Now && item.Sale.To >= DateTime.Now)
                    {

                        <div class="sale">

                            <img src="~/Images/discount.png" />
                        </div>
                        <div class="discount">
                            <p style="text-align:right">- @item.Sale.SaleRate%</p>
                        </div>
                    }
                    <img class="img-index" src="@item.Image" />
                </div>
                <div class="product-content-container">
                    <div class="productContent">
                        <div>
                            <div class="product-content-container">
                                <div class="container text-center mt-1">
                                    <a data-product-id="@item.ProductId" class="btn btn-primary button-index">Thêm vào giỏ hàng</a>
                                </div>
                                <div class="productContent">
                                    <div class="product-name">
                                        <p style="text-align:center">@item.ProductName</p>
                                    </div>
                                    <div class="product-price">
                                        @if (item.SaleId != null && item.Sale.From <= DateTime.Now && item.Sale.To >= DateTime.Now)
                                        {
                                            <p style="text-align:center;"><del>@item.Price</del> <span style="color:red;">@(item.Price - (item.Price * item.Sale.SaleRate / 100)) đ</span></p>
                                        }
                                        else
                                        {
                                            <p style="text-align:center">@item.Price</p>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>


<div class="container-fluid banner">
    <h2 class="title" style="margin-top: 10px">
        Bankingdom - Đồ Làm Bánh - Nấu Ăn - Pha Chế
    </h2>
    <div class="container-content">
        <div class="col-3">
            <div class="flex-grid-third1">
                <a href="@Url.Action("ListProduct","Products",new {@str = "Nguyên liệu lẩu nướng" })" target="_blank">
                    <img style="width: 99%" src="~/Images/lAU.jpg" />
                </a>
                <a href="@Url.Action("ListProduct","Products",new {@str = "Nguyên liệu làm bánh" })" target="_blank">
                    <img style="width: 99%" src="~/Images/Bo-anchor-2.jpg" />                                   @*AI đó test thử đêi*@
                </a>
                <a href="@Url.Action("ListProduct","Products",new {@str = "Nguyên liệu pha chế" })" target="_blank">
                    <img style="width: 99%" src="~/Images/Tran-chau.jpg" />
                </a>


            </div>
            <div class="flex-grid-third2">
                <div class="img1">
                    <a href="@Url.Action("ListProduct","Products",new {@str = "Nguyên liệu pha chế" })" target="_blank">
                        <img style="width: 100%; height: 100%" src="~/Images/Banner-anchor-1.jpg" />
                    </a>

                </div>
                <div class="img2">
                    <a href="@Url.Action("ListSale","Products")" target="_blank">
                        <img style="width: 99%" src="~/Images/Anh-vuong.jpg" />
                    </a>

                </div>
            </div>
        </div>
        <div>
            <div class="col-1">
                <a href="@Url.Action("ListProduct","Products",new {@str = "Nguyên liệu làm bánh" })" target="_blank">
                    <img style="width: 65%" src="~/Images/Banner-whip-2.jpg" />
                </a>

            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        @foreach (var item in Model.ProductList)
        {
            <div class="col-md-3 pt-5">
                <div class="productImg" style="position:relative">
                    @if (item.SaleId != null && item.Sale.From <= DateTime.Now && item.Sale.To >= DateTime.Now)
                    {

                        <div class="sale">

                            <img src="~/Images/discount.png" />
                        </div>
                        <div class="discount">
                            <p style="text-align:right">- @item.Sale.SaleRate%</p>
                        </div>
                    }
                    <img class="img-index" src="@item.Image" />
                </div>
                <div class="product-content-container">
                    <div class="productContent">
                        <div>
                            <div class="product-content-container">
                                <div class="container text-center mt-1">
                                    <a data-product-id="@item.ProductId" class="btn btn-primary button-index">Thêm vào giỏ hàng</a>
                                </div>
                                <div class="productContent">
                                    <div class="product-name">
                                        <p style="text-align:center">@item.ProductName</p>
                                    </div>
                                    <div class="product-price">
                                        @if (item.SaleId != null && item.Sale.From <= DateTime.Now && item.Sale.To >= DateTime.Now)
                                        {
                                            <p style="text-align:center;"><del>@item.Price</del> <span style="color:red;">@(item.Price - (item.Price * item.Sale.SaleRate / 100)) đ</span></p>
                                        }
                                        else
                                        {
                                            <p style="text-align:center">@item.Price</p>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

@section scripts
{
    <script>
        $(document).ready(function () {
            $('.button-index').on("click", function (e) {
                var id = $(e.target);
                $.post("/api/Cart/Add", { productId: id.attr("data-product-id") })
                    .done(function () {
                        var value = parseInt($(".notify-number").text(), 10) + 1;
                        $('.notify-number').text(value);
                    })
                    .fail(function () {
                        bootbox.alert("Something is wrong!");
                    })
            })
        })

        $('.dropdown-first').hover(function () {
            $(this).find('.dropdown-content').fadeIn(500);
        }, function () {
            $(this).find('.dropdown-content').fadeOut(0);
        });
    </script>
}